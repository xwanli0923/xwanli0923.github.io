<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>åœ¨ Fedora CoreOS ä¸­è¿è¡Œå®¹å™¨ | ä¸‡é‡Œåšå®¢</title>
<meta name="generator" content="Jekyll v4.3.1">
<meta property="og:title" content="åœ¨ Fedora CoreOS ä¸­è¿è¡Œå®¹å™¨">
<meta name="author" content="é‚¢ä¸‡é‡Œ">
<meta property="og:locale" content="zh_CN">
<meta name="description" content="åŠŸä¸å”æ">
<meta property="og:description" content="åŠŸä¸å”æ">
<link rel="canonical" href="http://localhost:4000/2023/02/20/running-a-container-with-fcos.html">
<meta property="og:url" content="http://localhost:4000/2023/02/20/running-a-container-with-fcos.html">
<meta property="og:site_name" content="ä¸‡é‡Œåšå®¢">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-20T00:00:00+08:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="åœ¨ Fedora CoreOS ä¸­è¿è¡Œå®¹å™¨">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"é‚¢ä¸‡é‡Œ"},"dateModified":"2023-02-20T00:00:00+08:00","datePublished":"2023-02-20T00:00:00+08:00","description":"åŠŸä¸å”æ","headline":"åœ¨ Fedora CoreOS ä¸­è¿è¡Œå®¹å™¨","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2023/02/20/running-a-container-with-fcos.html"},"url":"http://localhost:4000/2023/02/20/running-a-container-with-fcos.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="shortcut icon" href="favicon.ico">
  <!---
  <link rel="stylesheet" href="../_includes/views/custom/css/fonts.css">
    --->
  <link rel="stylesheet" href="/_includes/views/custom/css/fonts.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <script src="/assets/js/main.js"></script><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="ä¸‡é‡Œåšå®¢">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/go.min.js"></script>



















<script>
// Init highlight js
document.addEventListener('DOMContentLoaded', function(event) {
  var els = document.querySelectorAll('pre code')

  function addLangData(block) {
    var outer = block.parentElement.parentElement.parentElement;
    var lang = block.getAttribute('data-lang');
    for (var i = 0; i < outer.classList.length; i++) {
      var cls = outer.classList[i];
      if (cls.startsWith('language-')) {
        lang = cls;
        break;
      }
    }
    if (!lang) {
      cls = block.getAttribute('class');
      lang = cls ? cls.replace('hljs ', '') : '';
    }
    if (lang.startsWith('language-')) {
      lang = lang.substr(9);
    }
    block.setAttribute('class', 'hljs ' + lang);
    block.parentNode.setAttribute('data-lang', lang);
  }

  function addBadge(block) {
    var enabled = ('true' || 'true').toLowerCase();
    if (enabled == 'true') {
      var pre = block.parentElement;
      pre.classList.add('badge');
    }
  }

  function handle(block) {
    addLangData(block);
    addBadge(block)
    hljs.highlightBlock(block);
  }

  for (var i = 0; i < els.length; i++) {
    var el = els[i];
    handle(el);
  }
});
</script>

<style>
  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: #fff;
    background-color: #6d6d6d;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: lowercase;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    right: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }
</style>
</head>
<body>



























































































































<header class="site-header " role="banner">
  <div class="wrapper">
    <div class="site-header-inner">
<span class="site-brand"><a class="site-brand-inner" rel="author" href="/">
  <img class="site-favicon" title="ä¸‡é‡Œåšå®¢" src="favicon.ico" onerror="this.style.display='none'">
  ä¸‡é‡Œåšå®¢
</a>
</span><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger">
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewbox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
              </svg>
            </span>
          </label>

          <div class="trigger">
<a class="page-link" href="/about.html">å…³äº</a><a class="page-link" href="/archives.html">å½’æ¡£</a><a class="page-link" href="/categories.html">åˆ†ç±»</a><a class="page-link" href="/">ä¸»é¡µ</a><a class="page-link" href="/tags.html">æ ‡ç­¾</a>




</div>
        </nav>
</div>
  </div>
</header>

<script>
  (function() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  })();
</script>
















































































































































<script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    hashValue = decodeURIComponent(hashValue);
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>
<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light">Light</p>
      <p class="dark">Dark</p>
    </div>
  </label>
</div>




<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('auto' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="framework">
  <section class="main">

     <div class="post">
  <section>









<header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">åœ¨ Fedora CoreOS ä¸­è¿è¡Œå®¹å™¨</h1>
  <h2 class="post-subtitle"></h2>

  <p class="post-meta">
    <time class="dt-published" datetime="2023-02-20T00:00:00+08:00" itemprop="datePublished"><i class="fa fa-calendar"></i> 2023-02-20 Mon
    </time>

    
    
































    <span class="post-reading-time left-vsplit"><i class="fa fa-clock-o"></i> About 33 mins</span>
  </p>
<div class="post-tags"><a class="post-tag" href="/tags.html#linux%20container%20cloud-native">#linux container cloud-native</a></div></header>
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="post-content e-content" itemprop="articleBody">

      <p><img src="/assets/images/2023-02-20/welcomefedoracoreos.jpg" alt="Fedoraject-Anaconda-installer"></p>

<p><em>[å›¾ç‰‡æ¥æºï¼š<a href="https://docs.fedoraproject.org/en-US/fedora-coreos/_images/welcomefedoracoreos.jpg">Fedora Docs</a> ]</em></p>

<p><em>ä½œè€…: é‚¢ä¸‡é‡Œ</em></p>

<p>Fedora CoreOS is an automatically updating, minimal, monolithic, container-focused operating system, designed for clusters but also operable standalone, optimized for Kubernetes but also great without it. It aims to combine the best of both CoreOS Container Linux and Fedora Atomic Host, integrating technology like Ignition from Container Linux with rpm-ostree and SELinux hardening from Project Atomic. Its goal is to provide the best container host to run containerized workloads securely and at scale.<br>
<em>ğŸª§æ‘˜è‡ª <a href="https://docs.fedoraproject.org/jp/fedora-coreos/">Fedora CoreOS Documentation</a></em></p>

<h1 id="å†™åœ¨å‰é¢">å†™åœ¨å‰é¢</h1>

<p>éšç€äº‘åŸç”Ÿçš„å¿«é€Ÿå‘å±•ï¼Œå°†ä¸šåŠ¡ç³»ç»Ÿéƒ¨ç½²ä»¥ <strong>Kubernetes</strong> è¿™ç§å®¹å™¨ç¼–æ’ç³»ç»Ÿä¸ºä¸»çš„ç”¨æˆ·è¶Šæ¥è¶Šå¤šï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œåº•å±‚æ“ä½œç³»ç»Ÿç”±äºæ— æ³•å®ç°ä¸€è‡´æ€§é…ç½®è€Œå¯¼è‡´çš„é—®é¢˜é¢‘é¢‘å‡ºç°ï¼Œå› æ­¤ä¸€ä¸ªä¸“é—¨ç”¨äºè¿è¡Œå®¹å™¨ï¼Œä½¿ç”¨äº†å®¹å™¨çš„è®¾è®¡ç†å¿µçš„æ“ä½œç³»ç»Ÿåº”è¿è€Œç”Ÿï¼Œå¸¸è§çš„å®¹å™¨æ“ä½œç³»ç»Ÿæœ‰ <strong>Fedora CoreOS</strong> ã€ <strong>Red Hat CoreOS</strong> ã€<strong>RancherOS</strong> ã€<strong>Photon</strong> ã€ <strong>KubeOS</strong> ç­‰</p>

<p>æœ¬æ–‡ä½¿ç”¨ <strong>Fedora CoreOS</strong> ä½œä¸ºæ ·ä¾‹è¿è¡Œä¸€ä¸ªç®€å•çš„å®¹å™¨ã€‚</p>

<p><em>æ‰©å±•çŸ¥è¯†</em>ï¼š <strong>Fedora</strong> åœ¨æ—©æœŸæœ‰ä¸€ä¸ªä¸“é—¨è¿è¡Œå®¹å™¨çš„äº§å“ <strong>Atomic</strong> ï¼Œåæ¥çº¢å¸½å°† <strong>CoreOS</strong> æ”¶è´­ä¹‹åï¼Œçº¢å¸½å°† <strong>Atomic</strong> å’Œ <strong>CoreOS</strong> åˆå¹¶ä¸º <strong>Fedora CoreOS</strong> ï¼Œç®€ç§° <em>fcos</em>ï¼Œå•†ä¸šç‰ˆæœ¬ä¸º<strong>Red Hat CoreOS</strong>ï¼Œç®€ç§°<em>RHCOS</em>ã€‚</p>

<h1 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h1>

<p>æ‚¨éœ€è¦å®ç°å‡†å¤‡ä¸€å°å’Œå°†æ¥éƒ¨ç½² <strong>FCOS</strong> èƒ½å¤Ÿé€šä¿¡çš„ä¸€ä¸ª web æœåŠ¡å™¨ï¼Œç”¨ç”¨äºå­˜æ”¾ <strong>ignition</strong> æ–‡ä»¶ã€‚</p>

<ul>
  <li>æˆ‘è¿™é‡Œä½¿ç”¨çš„ä¸€å°æ¡Œé¢ç‰ˆæœ¬ Linux å‘è¡Œç‰ˆï¼š<strong>Linux Mint 21.1</strong>
</li>
</ul>

<p><img src="/assets/images/2023-02-20/Snipaste_2023-02-20_15-29-31.png" alt=""></p>

<ul>
  <li>ç½‘ç»œä¿¡æ¯å¦‚ä¸‹</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”ŒğŸ’  devops @ ğŸ’»  workstation <span class="k">in</span> ğŸ“  ~
â””â¯ ip addr show ens37
3: ens37: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    <span class="nb">link</span>/ether 00:0c:29:d9:67:b5 brd ff:ff:ff:ff:ff:ff
    altname enp2s5
    inet 172.25.254.228/24 brd 172.25.254.255 scope global dynamic noprefixroute ens37
       valid_lft 155sec preferred_lft 155sec
    inet6 fe80::712d:e12e:ba61:7545/64 scope <span class="nb">link </span>noprefixroute 
       valid_lft forever preferred_lft forever
</code></pre></div></div>

<ul>
  <li>å¹¶ä¸”æˆ‘å·²ç»å‡†å¤‡å¥½äº† Web æœåŠ¡å™¨</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”ŒğŸ’  devops @ ğŸ’»  workstation <span class="k">in</span> ğŸ“  ~
â””â¯ <span class="nb">sudo </span>systemctl status apache2.service
â— apache2.service - The Apache HTTP Server
     Loaded: loaded <span class="o">(</span>/lib/systemd/system/apache2.service<span class="p">;</span> enabled<span class="p">;</span> vendor preset: enabled<span class="o">)</span>
     Active: active <span class="o">(</span>running<span class="o">)</span> since Sun 2023-02-19 22:33:33 MST<span class="p">;</span> 1h 58min ago
       Docs: https://httpd.apache.org/docs/2.4/
    Process: 947 <span class="nv">ExecStart</span><span class="o">=</span>/usr/sbin/apachectl start <span class="o">(</span><span class="nv">code</span><span class="o">=</span>exited, <span class="nv">status</span><span class="o">=</span>0/SUCCESS<span class="o">)</span>
    Process: 5087 <span class="nv">ExecReload</span><span class="o">=</span>/usr/sbin/apachectl graceful <span class="o">(</span><span class="nv">code</span><span class="o">=</span>exited, <span class="nv">status</span><span class="o">=</span>0/SUCCESS<span class="o">)</span>
   Main PID: 1031 <span class="o">(</span>apache2<span class="o">)</span>
      Tasks: 55 <span class="o">(</span>limit: 2182<span class="o">)</span>
     Memory: 6.5M
        CPU: 289ms
     CGroup: /system.slice/apache2.service
             â”œâ”€1031 /usr/sbin/apache2 <span class="nt">-k</span> start
             â”œâ”€5105 /usr/sbin/apache2 <span class="nt">-k</span> start
             â””â”€5106 /usr/sbin/apache2 <span class="nt">-k</span> start

Feb 19 22:33:31 workstation.lab.example.net systemd[1]: Starting The Apache HTTP Server...
Feb 19 22:33:33 workstation.lab.example.net systemd[1]: Started The Apache HTTP Server.
Feb 20 00:00:00 workstation.lab.example.net systemd[1]: Reloading The Apache HTTP Server...
Feb 20 00:00:00 workstation.lab.example.net systemd[1]: Reloaded The Apache HTTP Server.


â”ŒğŸ’  devops @ ğŸ’»  workstation <span class="k">in</span> ğŸ“  ~
â””â¯ ss <span class="nt">-tplna</span> | <span class="nb">grep</span> :8080
LISTEN 0      511                 <span class="k">*</span>:8080               <span class="k">*</span>:<span class="k">*</span>           
</code></pre></div></div>

<ul>
  <li>
    <p>è¯·äº‹å…ˆä¸‹è½½ <strong>FCOS</strong> é•œåƒ</p>

    <ul>
      <li>
        <p>æœ€æ–°ç‰ˆæœ¬Fedoraä¸‹è½½ç«™ç‚¹ <a href="https://getfedora.org/">https://getfedora.org/</a></p>
      </li>
      <li>
        <p>æœ¬æ–‡ä½¿ç”¨é•œåƒçš„é“¾æ¥ <a href="https://builds.coreos.fedoraproject.org/prod/streams/stable/builds/37.20230122.3.0/x86_64/fedora-coreos-37.20230122.3.0-live.x86_64.iso">https://builds.coreos.fedoraproject.org/prod/streams/stable/builds/37.20230122.3.0/x86_64/fedora-coreos-37.20230122.3.0-live.x86_64.iso</a></p>
      </li>
    </ul>
  </li>
</ul>

<h3 id="1-åœ¨linuxmintä¸­å®‰è£…butane">1. åœ¨<strong>LinuxMint</strong>ä¸­å®‰è£…<strong>butane</strong>
</h3>

<p><strong>Fedora</strong>ç¤¾åŒºä¸º Linux å®¢æˆ·ç«¯æä¾›äº†ä¸¤ç§æ–¹å¼æ¥å®‰è£…<strong>butane</strong>å·¥å…·ï¼Œè¿™ç§å·¥å…·å¯ä»¥å°†ç¼–å†™å¥½çš„<code class="language-plaintext highlighter-rouge">ignition</code>æ–‡ä»¶è½¬ä¸º JSON æ ¼å¼ï¼›ç¬¬ä¸€ç§ä½¿ç”¨ <strong>dnf</strong> è¿›è¡Œå®‰è£…ï¼Œç¬¬äºŒç§ä½¿ç”¨ <strong>brew</strong>å®‰è£…ï¼›æˆ‘ä»¬é‡‡ç”¨ <strong>brew</strong>æ–¹å¼å®‰è£…</p>

<ul>
  <li>é¦–å…ˆå®‰è£… <strong>brew</strong> å·¥å…·</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”ŒğŸ’  devops @ ğŸ’»  workstation <span class="k">in</span> ğŸ“  ~
â””â¯ /bin/bash <span class="nt">-c</span> <span class="s2">"</span><span class="si">$(</span>curl <span class="nt">-fsSL</span> https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class="si">)</span><span class="s2">"</span>
</code></pre></div></div>

<ul>
  <li>é…ç½® <strong>brew</strong> å·¥å…·</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”ŒğŸ’  devops @ ğŸ’»  workstation <span class="k">in</span> ğŸ“  ~
â””â¯ <span class="o">(</span><span class="nb">echo</span><span class="p">;</span> <span class="nb">echo</span> <span class="s1">'eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"'</span><span class="o">)</span> <span class="o">&gt;&gt;</span> /home/devops/.bashrc

â”ŒğŸ’  devops @ ğŸ’»  workstation <span class="k">in</span> ğŸ“  ~
â””â¯  <span class="nb">sudo </span>apt-get <span class="nb">install </span>build-essential

â”ŒğŸ’  devops @ ğŸ’»  workstation <span class="k">in</span> ğŸ“  ~
â””â¯  <span class="nb">source</span> ~/.bashrc

â”ŒğŸ’  devops @ ğŸ’»  workstation <span class="k">in</span> ğŸ“  ~
â””â¯  brew <span class="nb">install </span>gcc
</code></pre></div></div>

<ul>
  <li>ä½¿ç”¨ <strong>brew</strong>å®‰è£… <strong>butane</strong>
</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”ŒğŸ’  devops @ ğŸ’»  workstation <span class="k">in</span> ğŸ“  ~
â””â¯  brew <span class="nb">install </span>butane
</code></pre></div></div>

<ul>
  <li>ç”Ÿæˆå¯†é’¥å¯¹</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”ŒğŸ’  devops @ ğŸ’»  workstation <span class="k">in</span> ğŸ“  ~
â””â¯  ssh-keygen <span class="nt">-t</span> rsa <span class="nt">-N</span> <span class="s1">''</span> <span class="nt">-b</span> 2048 <span class="nt">-f</span> ~/.ssh/id_rsa <span class="nt">-q</span>

â”ŒğŸ’  devops @ ğŸ’»  workstation <span class="k">in</span> ğŸ“  ~
â””â¯ <span class="nb">cat</span> ~/.ssh/id_rsa.pub 
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCms5d2FmXtXmhSJIezA812ymi4uT3XELM508FkD/4Pv+wXE0gl/aN7bPCVD6qxpHbXHgj6nWTIoej3pZeEYEOGlXua98tSyu3aaBfj5UIY5eF8838EireSJSVZPj3k6aB8ryL5W4G/4buwW6IzvvRRrknJDsFvajs5LvLiLUNrag/i9PIQZ0VZZQbLhx0/ZJCDAFIREpXuyPM+FsS2TYOnRZNeD/2IFscI05Xe4mA0NdI8Fzfji0c0dIBKYDD3mKFQ7qhvaLD7Q2v6I9hyfe5nZqAcaPW2f+rfsycdkhSOCZNQ7DbfWm7ILbAz+FFAUuzrMseytoEfOXbemQpgM7q5hIJgZkLOb38o4e6uXH+A43svE5U1tWKpaX2yRDSvi4rP9Nae0SdrkBzFG9dPzQvbEFYla+6BiFh+iRnnOLegni1WT9GjOonKay0/XCxH9s8mlXK1hKd/jgWf9j/BTkAOb++NZDCV5fsfGG+wnMUAcc44U6MNij+w3n4u6BiqAB0<span class="o">=</span> devops@workstation.lab.example.net
</code></pre></div></div>

<h3 id="2-æŸ¥çœ‹fcosèŠ‚ç‚¹ç½‘ç»œç¡¬ä»¶ç­‰ä¿¡æ¯">2. æŸ¥çœ‹FCOSèŠ‚ç‚¹ç½‘ç»œã€ç¡¬ä»¶ç­‰ä¿¡æ¯</h3>

<ul>
  <li>åˆ›å»ºä¸€å°è™šæ‹Ÿæœºï¼Œè®¾ç½®ä¸º <em>UEFI</em> ï¼Œä½¿ç”¨ <strong>fcos</strong> å…‰ç›˜å¼•å¯¼,ç•Œé¢å¦‚ä¸‹</li>
</ul>

<p><img src="/assets/images/2023-02-20/Snipaste_2023-02-20_15-51-53.png" alt=""></p>

<ul>
  <li>æŸ¥çœ‹ç½‘å¡å</li>
</ul>

<p><img src="/assets/images/2023-02-20/Snipaste_2023-02-20_15-53-04.png" alt=""></p>

<ul>
  <li>
    <p>å¦‚æœæ‚¨çš„è™šæ‹Ÿæœºæ²¡æœ‰é€šè¿‡<strong>DHCP</strong>è·å–åœ°å€,éœ€è¦æ‰‹åŠ¨è®¾ç½®ç½‘ç»œä¿¡æ¯ï¼Œç¡®ä¿å¯ä»¥å’Œæä¾›<code class="language-plaintext highlighter-rouge">ignition</code>æ–‡ä»¶çš„ä¸»æœºè¿›è¡Œé€šä¿¡</p>

    <ul>
      <li>è®¾ç½®ç½‘ç»œçš„å‘½ä»¤ä¸º <code class="language-plaintext highlighter-rouge">sudo nmtui</code>
</li>
    </ul>

    <p><img src="/assets/images/2023-02-20/Snipaste_2023-02-20_15-55-12.png" alt=""></p>
  </li>
</ul>

<hr>
<p><img src="/assets/images/2023-02-20/Snipaste_2023-02-20_15-55-42.png" alt=""></p>

<hr>
<p><img src="/assets/images/2023-02-20/Snipaste_2023-02-20_15-56-21.png" alt=""></p>

<hr>

<ul>
  <li>æ¿€æ´»ç½‘ç»œè¿æ¥</li>
</ul>

<p><img src="/assets/images/2023-02-20/Snipaste_2023-02-20_15-57-04.png" alt=""></p>

<hr>
<ul>
  <li>
    <p>ä½¿çŠ¶æ€ç”± <code class="language-plaintext highlighter-rouge">Deactivate</code> å˜ä¸º <code class="language-plaintext highlighter-rouge">Activate</code>ï¼Œå†å˜ä¸º <code class="language-plaintext highlighter-rouge">Deactivate</code>
  <img src="/assets/images/2023-02-20/Snipaste_2023-02-20_15-58-00.png" alt=""></p>
  </li>
  <li>
    <p>æ£€æŸ¥æ˜¯å¦ç”Ÿæ•ˆ</p>
  </li>
</ul>

<p><img src="/assets/images/2023-02-20/Snipaste_2023-02-20_16-05-57.png" alt=""></p>

<ul>
  <li>æ£€æŸ¥ç£ç›˜ä¿¡æ¯</li>
</ul>

<p><img src="/assets/images/2023-02-20/Snipaste_2023-02-20_16-09-19.png" alt=""></p>

<h3 id="3-å¼€å§‹ç¼–å†™ignitionæ–‡ä»¶">3. å¼€å§‹ç¼–å†™<code class="language-plaintext highlighter-rouge">ignition</code>æ–‡ä»¶</h3>

<ul>
  <li>åˆ›å»ºæ–‡ä»¶ <code class="language-plaintext highlighter-rouge">fcos36.yml</code>ï¼Œ æ ¹æ®éœ€è¦ç¼–å†™çš„<code class="language-plaintext highlighter-rouge">ignition</code>æ–‡ä»¶å¦‚ä¸‹ï¼š</li>
</ul>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">variant</span><span class="pi">:</span> <span class="s">fcos</span>
<span class="na">version</span><span class="pi">:</span> <span class="s">1.4.0</span>
<span class="c1"># åˆ›å»ºç”¨æˆ· core å¹¶ä½¿ç”¨ ssh è®¤è¯ç™»å½•</span>
<span class="na">passwd</span><span class="pi">:</span>
  <span class="na">users</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">core</span>
      <span class="na">ssh_authorized_keys</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCms5d2FmXtXmhSJIezA812ymi4uT3XELM508FkD/4Pv+wXE0gl/aN7bPCVD6qxpHbXHgj6nWTIoej3pZeEYEOGlXua98tSyu3aaBfj5UIY5eF8838EireSJSVZPj3k6aB8ryL5W4G/4buwW6IzvvRRrknJDsFvajs5LvLiLUNrag/i9PIQZ0VZZQbLhx0/ZJCDAFIREpXuyPM+FsS2TYOnRZNeD/2IFscI05Xe4mA0NdI8Fzfji0c0dIBKYDD3mKFQ7qhvaLD7Q2v6I9hyfe5nZqAcaPW2f+rfsycdkhSOCZNQ7DbfWm7ILbAz+FFAUuzrMseytoEfOXbemQpgM7q5hIJgZkLOb38o4e6uXH+A43svE5U1tWKpaX2yRDSvi4rP9Nae0SdrkBzFG9dPzQvbEFYla+6BiFh+iRnnOLegni1WT9GjOonKay0/XCxH9s8mlXK1hKd/jgWf9j/BTkAOb++NZDCV5fsfGG+wnMUAcc44U6MNij+w3n4u6BiqAB0=</span>

<span class="na">storage</span><span class="pi">:</span>
<span class="c1"># åˆ›å»ºç³»ç»Ÿçš„æ ¹åˆ†åŒºä¸º 8GB</span>
  <span class="na">disks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">device</span><span class="pi">:</span> <span class="s">/dev/disk/by-id/coreos-boot-disk</span>
      <span class="na">wipe_table</span><span class="pi">:</span> <span class="no">false</span>
      <span class="na">partitions</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">number</span><span class="pi">:</span> <span class="m">4</span>
          <span class="na">label</span><span class="pi">:</span> <span class="s">root</span>
          <span class="na">size_mib</span><span class="pi">:</span> <span class="m">8192</span>
          <span class="na">resize</span><span class="pi">:</span> <span class="no">true</span>
        <span class="pi">-</span> <span class="na">size_mib</span><span class="pi">:</span> <span class="m">0</span>
          <span class="na">label</span><span class="pi">:</span> <span class="s">var</span>
<span class="c1"># é…ç½®ç½‘å¡ ens160 çš„ç½‘ç»œä¿¡æ¯</span>
  <span class="na">files</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/etc/NetworkManager/system-connections/ens160.nmconnection</span>
      <span class="na">mode</span><span class="pi">:</span> <span class="m">0600</span>
      <span class="na">contents</span><span class="pi">:</span>
        <span class="na">inline</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">[connection]</span>
          <span class="s">id=ens160</span>
          <span class="s">type=ethernet</span>
          <span class="s">interface-name=ens160</span>
          <span class="s">[ipv4]</span>
          <span class="s">address1=172.25.254.221/24;172.25.254.254</span>
          <span class="s">dns=8.8.8.8;</span>
          <span class="s">dns-search=lab.example.net</span>
          <span class="s">may-fail=false</span>
          <span class="s">method=manual</span>
<span class="c1"># è®¾ç½®ä¸»æœºå</span>
    <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/etc/hostname</span>
      <span class="na">mode</span><span class="pi">:</span> <span class="m">0644</span>
      <span class="na">contents</span><span class="pi">:</span>
        <span class="na">inline</span><span class="pi">:</span> <span class="s">fcos.xwanli0923.github.io</span>
<span class="c1"># åˆ›å»ºå®¹å™¨æœ¬åœ°æŒä¹…åŒ–å­˜å‚¨ä½ç½® </span>
  <span class="na">directories</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/opt/website/html</span>
      <span class="na">overwrite</span><span class="pi">:</span> <span class="no">true</span>

<span class="c1"># åˆ›å»ºå®¹å™¨æ‰€éœ€çš„æ–‡ä»¶</span>
    <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/opt/website/html/index.html</span>
      <span class="na">overwrite</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">contents</span><span class="pi">:</span>
        <span class="na">inline</span><span class="pi">:</span> <span class="s">&lt;h1&gt;Hello, I am Xing Wanli. Welcome to cloudshelledu!&lt;/h1&gt;</span>
      <span class="na">mode</span><span class="pi">:</span> <span class="m">0644</span>
<span class="c1"># æ›´æ”¹æ—¶åŒº</span>
<span class="err">  </span><span class="na">links</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/etc/localtime</span>
      <span class="na">target</span><span class="pi">:</span> <span class="s">../usr/share/zoneinfo/Asia/Shanghai</span>
<span class="c1"># åˆ›å»ºæŒ‡å®šçš„æ–‡ä»¶ç³»ç»Ÿ</span>
  <span class="na">filesystems</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/var</span>
      <span class="na">device</span><span class="pi">:</span> <span class="s">/dev/disk/by-partlabel/var</span>
      <span class="na">format</span><span class="pi">:</span> <span class="s">ext4</span>
      <span class="na">with_mount_unit</span><span class="pi">:</span> <span class="no">true</span>
<span class="c1"># åˆ›å»ºä¸€ä¸ª Systemd Unit æ–‡ä»¶ï¼Œç”¨äºå¼€æœºè¿è¡Œ podman å®¹å™¨ï¼Œå®¹å™¨åä¸º mywebserver ï¼Œæ˜ å°„ä¸»æœºç«¯å£ä¸º 80 </span>
<span class="na">systemd</span><span class="pi">:</span>
  <span class="na">units</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">container-mywebserver.service</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">contents</span><span class="pi">:</span> <span class="pi">|</span>
        <span class="s">[Unit]</span>
        <span class="s">Description=Podman container-mywebserver.service</span>
        <span class="s">Documentation=man:podman-generate-systemd(1)</span>
        <span class="s">Wants=network-online.target</span>
        <span class="s">After=network-online.target</span>
        <span class="s">RequiresMountsFor=%t/containers</span>

        <span class="s">[Service]</span>
        <span class="s">Environment=PODMAN_SYSTEMD_UNIT=%n</span>
        <span class="s">Restart=on-failure</span>
        <span class="s">TimeoutStopSec=70</span>
        <span class="s">ExecStartPre=/bin/rm -f %t/%n.ctr-id</span>
        <span class="s">ExecStart=/usr/bin/podman run --cidfile=%t/%n.ctr-id --sdnotify=conmon --cgroups=no-conmon --rm --replace -d --name mywebserver -v /opt/website/html:/usr/local/apache2/htdocs:Z -p 80:80 docker.io/library/httpd:latest</span>
        <span class="s">ExecStop=/usr/bin/podman stop --ignore --cidfile=%t/%n.ctr-id</span>
        <span class="s">ExecStopPost=/usr/bin/podman rm -f --ignore --cidfile=%t/%n.ctr-id</span>
        <span class="s">Type=notify</span>
        <span class="s">NotifyAccess=all</span>

        <span class="s">[Install]</span>
        <span class="s">WantedBy=multi-user.target default.target</span>
</code></pre></div></div>

<ul>
  <li>å°†<code class="language-plaintext highlighter-rouge">ignition</code>æ–‡ä»¶è½¬ä¸º <code class="language-plaintext highlighter-rouge">ign</code> æ ¼å¼</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”ŒğŸ’  devops @ ğŸ’»  workstation <span class="k">in</span> ğŸ“  ~
â””â¯ butane <span class="nt">--pretty</span> <span class="nt">--strict</span> fcos36.yml <span class="nt">--output</span> fcos36.ign 
</code></pre></div></div>

<ul>
  <li>å°†<code class="language-plaintext highlighter-rouge">ignition</code>æ–‡ä»¶å­˜æ”¾åœ¨ Web ç«™ç‚¹å¯¹åº”çš„ç›®å½•ä¸‹</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”ŒğŸ’  devops @ ğŸ’»  workstation <span class="k">in</span> ğŸ“  ~
â””â¯ <span class="nb">sudo cp </span>fcos36.ign /var/www/html/ign/
</code></pre></div></div>

<ul>
  <li>æµ‹è¯•æ–‡ä»¶æ˜¯å¦èƒ½è®¿é—®</li>
</ul>

<p><img src="/assets/images/2023-02-20/Snipaste_2023-02-20_16-19-12.png" alt=""></p>

<h3 id="4-ä½¿ç”¨ignitionæ–‡ä»¶å¼€å§‹éƒ¨ç½²-fcos">4. ä½¿ç”¨<code class="language-plaintext highlighter-rouge">ignition</code>æ–‡ä»¶å¼€å§‹éƒ¨ç½² FCOS</h3>

<ul>
  <li>åœ¨FCOSçš„è™šæ‹Ÿæœºä¸­æ‰§è¡Œå‘½ä»¤</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>core@localhost ~]<span class="nv">$ </span><span class="nb">exit</span>    <span class="c"># å¦‚æœçœ‹ä¸åˆ°å®‰è£…å¸®åŠ©å‘½ä»¤ï¼Œå¯å…ˆæ‰§è¡Œ `exit` </span>
<span class="o">[</span>core@localhost ~]<span class="nv">$ </span><span class="nb">sudo </span>coreos-installer <span class="nb">install</span> /dev/sda <span class="se">\</span>
                    <span class="nt">--ignition-url</span> http://172.25.254.228:8080/ign/fcos36.ign <span class="se">\</span>
                    <span class="nt">--insecure-ignition</span>
</code></pre></div></div>
<hr>
<p><img src="/assets/images/2023-02-20/Snipaste_2023-02-20_16-22-44.png" alt=""></p>

<hr>
<ul>
  <li>å®‰è£…ç»“æŸï¼Œé‡å¯ç³»ç»Ÿ</li>
</ul>

<p><img src="/assets/images/2023-02-20/Snipaste_2023-02-20_16-27-07.png" alt=""></p>

<ul>
  <li>ç™»å½•ç•Œé¢</li>
</ul>

<p><img src="/assets/images/2023-02-20/Snipaste_2023-02-20_16-29-17.png" alt=""></p>

<h3 id="5-è¿œç¨‹è¿æ¥å¹¶éªŒè¯ç»“æœ">5. è¿œç¨‹è¿æ¥å¹¶éªŒè¯ç»“æœ</h3>

<ul>
  <li>ä½¿ç”¨ SSH ç§é’¥è¿›è¡Œè¿æ¥</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”ŒğŸ’  devops @ ğŸ’»  workstation <span class="k">in</span> ğŸ“  ~
â””â¯ ssh <span class="nt">-i</span> ~/.ssh/id_rsa core@172.25.254.221
The authenticity of host <span class="s1">'172.25.254.221 (172.25.254.221)'</span> can<span class="s1">'t be established.
ED25519 key fingerprint is SHA256:RmfcSQncM52Z6pn8acIrpXjsLpw167fDyiSjVKHCy0I.
This key is not known by any other names
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '</span>172.25.254.221<span class="s1">' (ED25519) to the list of known hosts.
Fedora CoreOS 37.20230122.3.0
Tracker: https://github.com/coreos/fedora-coreos-tracker
Discuss: https://discussion.fedoraproject.org/tag/coreos

[core@fcos ~]$ 
</span></code></pre></div></div>

<ul>
  <li>æŸ¥çœ‹ç£ç›˜åˆ†åŒº</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>core@fcos ~]<span class="nv">$ </span>lsblk
NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
sda      8:0    0   20G  0 disk 
â”œâ”€sda1   8:1    0    1M  0 part 
â”œâ”€sda2   8:2    0  127M  0 part 
â”œâ”€sda3   8:3    0  384M  0 part /boot
â”œâ”€sda4   8:4    0    8G  0 part /sysroot/ostree/deploy/fedora-coreos/var
â”‚                               /usr
â”‚                               /etc
â”‚                               /
â”‚                               /sysroot
â””â”€sda5   8:5    0 11.5G  0 part /var/lib/containers/storage/overlay
                                /var
</code></pre></div></div>

<ul>
  <li>æŸ¥çœ‹ç½‘ç»œé…ç½®</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>core@fcos ~]<span class="nv">$ </span><span class="nb">hostname
</span>fcos.xwanli0923.github.io
<span class="o">[</span>core@fcos ~]<span class="nv">$ </span>ip addr show
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    <span class="nb">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: ens160: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000
    <span class="nb">link</span>/ether 00:0c:29:d0:c3:a7 brd ff:ff:ff:ff:ff:ff
    altname enp3s0
    inet 172.25.254.221/24 brd 172.25.254.255 scope global dynamic noprefixroute ens160
       valid_lft 151sec preferred_lft 151sec
    inet6 fe80::6f14:2875:e850:8fd9/64 scope <span class="nb">link </span>noprefixroute 
       valid_lft forever preferred_lft forever
3: podman0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    <span class="nb">link</span>/ether ce:16:23:ac:2f:1d brd ff:ff:ff:ff:ff:ff
    inet 10.88.0.1/16 brd 10.88.255.255 scope global podman0
       valid_lft forever preferred_lft forever
    inet6 fe80::9c82:7aff:fec2:5025/64 scope <span class="nb">link 
       </span>valid_lft forever preferred_lft forever
4: veth0@if2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master podman0 state UP group default qlen 1000
    <span class="nb">link</span>/ether 32:35:08:f9:a6:c3 brd ff:ff:ff:ff:ff:ff link-netns netns-a5949274-3549-2bb7-7ce9-36465802458e
    inet6 fe80::3035:8ff:fef9:a6c3/64 scope <span class="nb">link 
       </span>valid_lft forever preferred_lft forever
</code></pre></div></div>

<ul>
  <li>æ£€æŸ¥å®¹å™¨</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>core@fcos ~]<span class="nv">$ </span><span class="nb">sudo </span>podman ps 
CONTAINER ID  IMAGE                           COMMAND           CREATED        STATUS            PORTS               NAMES
3cec19adf88f  docker.io/library/httpd:latest  httpd-foreground  6 minutes ago  Up 6 minutes ago  0.0.0.0:80-&gt;80/tcp  mywebserver
</code></pre></div></div>

<ul>
  <li>å®¢æˆ·ç«¯è®¿é—®</li>
</ul>

<p><img src="/assets/images/2023-02-20/Snipaste_2023-02-20_16-39-59.png" alt=""></p>

<hr>

<p><em>å‚è€ƒæ–‡æ¡£ï¼š</em>
<em>- <a href="https://docs.fedoraproject.org/en-US/fedora-coreos/bare-metal/">Fedora CoreOSè£¸é‡‘å±å®‰è£…</a></em></p>


    </div>

</article>
<div class="post-nav">
<a class="previous" href="/2023/02/13/Install-Linux-Using-Kickstart.html" title="ä½¿ç”¨Kickstartè‡ªåŠ¨åŒ–éƒ¨ç½²Linuxæ“ä½œç³»ç»Ÿ">ä½¿ç”¨Kickstartè‡ªåŠ¨åŒ–éƒ¨ç½²Linuxæ“ä½œç³»ç»Ÿ</a><span></span>
</div>
<div class="post-related">
      <div>ç›¸å…³æ–‡ç« </div>
      <ul>
        <li><a class="post-link" href="/2022/12/25/reset-root-password.html" title="">åœ¨çº¢å¸½ä¼ä¸šç‰ˆLinux9ä¸­å¦‚ä½•é‡ç½®ROOTå¯†ç </a></li>
<li><a class="post-link" href="/2022/11/29/how-to-uninstall-ansible-tower.html" title="">å¦‚ä½•å¸è½½ Ansible Tower</a></li>
<li><a class="post-link" href="/2023/02/20/running-a-container-with-fcos.html" title="">åœ¨ Fedora CoreOS ä¸­è¿è¡Œå®¹å™¨</a></li>
<li><a class="post-link" href="/2023/02/13/Install-Linux-Using-Kickstart.html" title="">ä½¿ç”¨Kickstartè‡ªåŠ¨åŒ–éƒ¨ç½²Linuxæ“ä½œç³»ç»Ÿ</a></li>
</ul>
    </div>
<div class="post-comments"></div></section>
</div>


  </section>
  <section class="sidebar" style="margin-left: 15px;">
    <!-- Get sidebar items --><style type="text/css" media="screen">
.post-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
</style>

<div class="post-menu">
  <div class="post-menu-title">ç›®å½•</div>
  <div class="post-menu-content"></div>
</div>

<script>
  function generateContent() {
    var menu = document.querySelector(".post-menu");
    var menuContent =  menu.querySelector(".post-menu-content");
    var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");

    // Hide menu when no headings
    if (headings.length === 0) {
      return menu.style.display = "none";
    }

    // Generate post menu
    var menuHTML = '';
    for (var i = 0; i < headings.length; i++) {
      var h = headings[i];
      menuHTML += (
        '<li class="h-' + h.tagName.toLowerCase() + '">'
        + '<a href="#h-' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
    }

    menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';

    // The header element
    var header = document.querySelector('header.site-header');

    function doMenuCollapse(index, over_items) {
      var items = menuContent.firstChild.children;

      if (over_items == undefined) {
        over_items = 20;
      }

      if (items.length < over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0
        && !items[beginIndex].classList.contains('h-h2')) {
        beginIndex -= 1;
      }
      while (endIndex < items.length
        && !items[endIndex].classList.contains('h-h2')) {
        endIndex += 1;
      }
      for (var i = 0; i < beginIndex; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
      for (var i = beginIndex + 1; i < endIndex; i++) {
        item = items[i]
        // if (!item.classList.contains('h-h2')) {
          item.style.display = '';
        // }
      }
      for (var i = endIndex; i < items.length; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
    }

    // Init menu collapsed
    doMenuCollapse(-1);

    // Active the menu item
    window.addEventListener('scroll', function (event) {
      var lastActive = menuContent.querySelector('.active');
      var changed = true;
      var activeIndex = -1;
      for (var i = headings.length - 1; i >= 0; i--) {
        var h = headings[i];
        var headingRect = h.getBoundingClientRect();
        var headerRect = header.getBoundingClientRect();
        var headerTop = Math.floor(headerRect.top);
        var headerHeight = Math.floor(headerRect.height);
        var headerHeight = headerTop + headerHeight + 20;
        if (headingRect.top <= headerHeight) {
          var id = 'h-' + h.getAttribute('id');
          var a = menuContent.querySelector('a[href="#' + id  + '"]');
          var curActive = a.parentNode;
          if (curActive) {
            curActive.classList.add('active');
            activeIndex = i;
          }
          if (lastActive == curActive) {
            changed = false;
          }
          break;
        }
      }
      if (changed) {
        if (lastActive) {
          lastActive.classList.remove('active');
        }
        doMenuCollapse(activeIndex);
      }
      event.preventDefault();
    });
  }
  generateContent();
</script>
</section>
</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>
  <div class="wrapper">
    <div class="site-footer-inner">
	    <div>Copyright Â© 2022 ,All Rights Reserved <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh">è‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å</a>
</div>
        <!--
      <div> Contact: <a mailto: xingwanli@outlook.com">xingwanli@outlook.com</a>  
        <span class="qrcode" 
	       style="display:inline-block;vertical-align:middle;
	  		        background: #fff url(wechat/wechat-logo.svg) center top no-repeat;background-size: cover;
	  		        height: 30px;width: 33px;">
	              <img src="wechat/wechat.svg">
        </span>
      </div> 
      -->
      <div>Powered by <a title="Jekyll is a simple, blog-aware, static site
      generator." href="http://jekyllrb.com/">Jekyll</a> &amp; <a title="Yat, yet
      another theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a> | å‹æƒ…é“¾æ¥ ğŸ‘‰ | 
      <a href="https://alberthua-perl.github.io/">Alberthuaçš„åšå®¢</a> |
       <a href="https://www.kernel.org/doc/man-pages/">Linux man-pages</a>
      <!-- <class="footer-col rss-subscribe">Subscribe <a href="/feed.xml">via RSS</a></div> -->
      <!--
      <iframe
        style="margin-left: 2px; margin-bottom:-5px;"
        frameborder="0" scrolling="0" width="91px" height="20px"
        src="https://ghbtns.com/github-btn.html?user=xwanli0923&repo=linuxtechdocs&type=star&count=true" >
       </iframe>
       -->
       </div>
    </div>
  </div>
</footer>
</body>
</html>
